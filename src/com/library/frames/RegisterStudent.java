package com.library.frames;

import com.library.termsAndConditions.StudentTermsAndConditions;
import java.sql.*;
import java.awt.Color;
import javax.swing.JOptionPane;
import org.mindrot.jbcrypt.BCrypt;

/**
 * @author Jareth Bayron Baur
 * @since February 26, 2024
 */
public class RegisterStudent extends javax.swing.JFrame {

    /**
     * Creates new form StudentFrame
     */
    public RegisterStudent() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        rootPanel = new javax.swing.JPanel();
        fullNameLabel = new javax.swing.JLabel();
        firstNameTextField = new javax.swing.JTextField();
        middleNameTextField = new javax.swing.JTextField();
        lastNameTextField = new javax.swing.JTextField();
        usernameLabel = new javax.swing.JLabel();
        usernameTextField = new javax.swing.JTextField();
        emailTextField = new javax.swing.JTextField();
        passwordTextField = new javax.swing.JPasswordField();
        emailLabel = new javax.swing.JLabel();
        confirmPasswordTextField = new javax.swing.JPasswordField();
        passwordLabel = new javax.swing.JLabel();
        confirmPasswordLabel = new javax.swing.JLabel();
        phoneNumberLabel = new javax.swing.JLabel();
        phoneNumberTextField = new javax.swing.JTextField();
        AddressLabel = new javax.swing.JLabel();
        addressTextField = new javax.swing.JTextField();
        courseLabel = new javax.swing.JLabel();
        sectionTextField = new javax.swing.JTextField();
        iAgreeCheckBox = new javax.swing.JCheckBox();
        registerButton = new javax.swing.JButton();
        cancelButton = new javax.swing.JButton();
        userConditionsButton = new javax.swing.JButton();
        yearLevelComboBox = new javax.swing.JComboBox<>();
        courseComboBox = new javax.swing.JComboBox<>();

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        setTitle("Library Catalog System - Student Registration");
        setResizable(false);

        rootPanel.setBackground(new java.awt.Color(0, 0, 0));

        fullNameLabel.setForeground(new java.awt.Color(255, 255, 255));
        fullNameLabel.setText("Full Name:");

        firstNameTextField.setForeground(new java.awt.Color(153, 153, 153));
        firstNameTextField.setText("First Name");
        firstNameTextField.setToolTipText("Enter First Name");
        firstNameTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        firstNameTextField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                firstNameTextFieldFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                firstNameTextFieldFocusLost(evt);
            }
        });
        firstNameTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                firstNameTextFieldKeyPressed(evt);
            }
        });

        middleNameTextField.setForeground(new java.awt.Color(153, 153, 153));
        middleNameTextField.setText("Middle Name");
        middleNameTextField.setToolTipText("Enter Middle Name");
        middleNameTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        middleNameTextField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                middleNameTextFieldFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                middleNameTextFieldFocusLost(evt);
            }
        });
        middleNameTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                middleNameTextFieldKeyPressed(evt);
            }
        });

        lastNameTextField.setForeground(new java.awt.Color(153, 153, 153));
        lastNameTextField.setText("Last Name");
        lastNameTextField.setToolTipText("Enter Last Name");
        lastNameTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        lastNameTextField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                lastNameTextFieldFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                lastNameTextFieldFocusLost(evt);
            }
        });
        lastNameTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                lastNameTextFieldKeyPressed(evt);
            }
        });

        usernameLabel.setForeground(new java.awt.Color(255, 255, 255));
        usernameLabel.setText("Username:");

        usernameTextField.setForeground(new java.awt.Color(153, 153, 153));
        usernameTextField.setText("Username");
        usernameTextField.setToolTipText("Enter User Name");
        usernameTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        usernameTextField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                usernameTextFieldFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                usernameTextFieldFocusLost(evt);
            }
        });
        usernameTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                usernameTextFieldKeyPressed(evt);
            }
        });

        emailTextField.setForeground(new java.awt.Color(153, 153, 153));
        emailTextField.setText("Email");
        emailTextField.setToolTipText("Enter Email");
        emailTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        emailTextField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                emailTextFieldFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                emailTextFieldFocusLost(evt);
            }
        });
        emailTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                emailTextFieldKeyPressed(evt);
            }
        });

        passwordTextField.setToolTipText("Enter Password");
        passwordTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        passwordTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                passwordTextFieldKeyReleased(evt);
            }
        });

        emailLabel.setForeground(new java.awt.Color(255, 255, 255));
        emailLabel.setText("Email:");

        confirmPasswordTextField.setToolTipText("Confirm Password");
        confirmPasswordTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));

        passwordLabel.setForeground(new java.awt.Color(255, 255, 255));
        passwordLabel.setText("Password:");

        confirmPasswordLabel.setForeground(new java.awt.Color(255, 255, 255));
        confirmPasswordLabel.setText("Confirm Password:");

        phoneNumberLabel.setForeground(new java.awt.Color(255, 255, 255));
        phoneNumberLabel.setText("Phone Number:");

        phoneNumberTextField.setText("09");
        phoneNumberTextField.setToolTipText("Enter Phone Number");
        phoneNumberTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));

        AddressLabel.setForeground(new java.awt.Color(255, 255, 255));
        AddressLabel.setText("Address:");

        addressTextField.setToolTipText("Enter Address");
        addressTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));

        courseLabel.setForeground(new java.awt.Color(255, 255, 255));
        courseLabel.setText("Course:");

        sectionTextField.setForeground(new java.awt.Color(153, 153, 153));
        sectionTextField.setText("Section");
        sectionTextField.setToolTipText("Enter Section (single letter only)");
        sectionTextField.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        sectionTextField.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                sectionTextFieldFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                sectionTextFieldFocusLost(evt);
            }
        });
        sectionTextField.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                sectionTextFieldKeyPressed(evt);
            }
        });

        iAgreeCheckBox.setBackground(new java.awt.Color(0, 0, 0));
        iAgreeCheckBox.setForeground(new java.awt.Color(255, 255, 255));
        iAgreeCheckBox.setText("I agree to the Term and Conditions");
        iAgreeCheckBox.setToolTipText("By clicking, you agree to the User Terms and Conditions");
        iAgreeCheckBox.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        iAgreeCheckBox.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                iAgreeCheckBoxMouseClicked(evt);
            }
        });

        registerButton.setBackground(new java.awt.Color(51, 51, 51));
        registerButton.setForeground(new java.awt.Color(255, 255, 255));
        registerButton.setText("Register");
        registerButton.setToolTipText("Proceed Registration");
        registerButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        registerButton.setEnabled(false);
        registerButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                registerButtonMouseClicked(evt);
            }
        });

        cancelButton.setBackground(new java.awt.Color(51, 51, 51));
        cancelButton.setForeground(new java.awt.Color(255, 255, 255));
        cancelButton.setText("Cancel");
        cancelButton.setToolTipText("Cancel Registration");
        cancelButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        cancelButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                cancelButtonMouseClicked(evt);
            }
        });

        userConditionsButton.setBackground(new java.awt.Color(51, 51, 51));
        userConditionsButton.setForeground(new java.awt.Color(255, 255, 255));
        userConditionsButton.setText("User Terms");
        userConditionsButton.setToolTipText("View User Terms and Condtions.");
        userConditionsButton.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        userConditionsButton.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                userConditionsButtonMouseClicked(evt);
            }
        });

        yearLevelComboBox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "1", "2", "3", "4" }));
        yearLevelComboBox.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        yearLevelComboBox.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                yearLevelComboBoxMouseEntered(evt);
            }
        });

        courseComboBox.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "BSIT", "BSBA", "BTLED", "BSA" }));
        courseComboBox.setToolTipText("Select Department");
        courseComboBox.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));

        javax.swing.GroupLayout rootPanelLayout = new javax.swing.GroupLayout(rootPanel);
        rootPanel.setLayout(rootPanelLayout);
        rootPanelLayout.setHorizontalGroup(
            rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(rootPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(usernameLabel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(fullNameLabel, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(emailLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(passwordLabel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, rootPanelLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(userConditionsButton))
                    .addGroup(rootPanelLayout.createSequentialGroup()
                        .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(courseLabel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(AddressLabel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(confirmPasswordLabel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(phoneNumberLabel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(rootPanelLayout.createSequentialGroup()
                        .addComponent(registerButton)
                        .addGap(18, 18, 18)
                        .addComponent(cancelButton))
                    .addGroup(rootPanelLayout.createSequentialGroup()
                        .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(iAgreeCheckBox, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(rootPanelLayout.createSequentialGroup()
                                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(confirmPasswordTextField, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(usernameTextField, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(passwordTextField, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(firstNameTextField, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(phoneNumberTextField, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(courseComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(middleNameTextField)
                                    .addComponent(yearLevelComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)))
                            .addComponent(addressTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 246, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(emailTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 247, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(lastNameTextField)
                            .addComponent(sectionTextField, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap())
        );
        rootPanelLayout.setVerticalGroup(
            rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(rootPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(fullNameLabel)
                    .addComponent(firstNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(middleNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lastNameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(usernameLabel)
                    .addComponent(usernameTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(emailTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(emailLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(passwordTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(passwordLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(confirmPasswordTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(confirmPasswordLabel))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(phoneNumberLabel)
                    .addComponent(phoneNumberTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(AddressLabel)
                    .addComponent(addressTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(courseLabel)
                    .addComponent(sectionTextField, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(yearLevelComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(courseComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(iAgreeCheckBox)
                    .addComponent(userConditionsButton))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(rootPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(registerButton)
                    .addComponent(cancelButton))
                .addContainerGap(19, Short.MAX_VALUE))
        );

        getContentPane().add(rootPanel, java.awt.BorderLayout.CENTER);

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void yearLevelComboBoxMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_yearLevelComboBoxMouseEntered
        yearLevelComboBox.setToolTipText("Select Year Level");
    }//GEN-LAST:event_yearLevelComboBoxMouseEntered

    private void firstNameTextFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_firstNameTextFieldFocusGained
        setTextFieldPlaceholder(firstNameTextField, "First Name");
    }//GEN-LAST:event_firstNameTextFieldFocusGained

    private void firstNameTextFieldFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_firstNameTextFieldFocusLost
        removeTextFieldPlaceholder(firstNameTextField, "First Name");
    }//GEN-LAST:event_firstNameTextFieldFocusLost

    private void middleNameTextFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_middleNameTextFieldFocusGained
        setTextFieldPlaceholder(middleNameTextField, "Middle Name");
    }//GEN-LAST:event_middleNameTextFieldFocusGained

    private void middleNameTextFieldFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_middleNameTextFieldFocusLost
        removeTextFieldPlaceholder(middleNameTextField, "Middle Name");
    }//GEN-LAST:event_middleNameTextFieldFocusLost

    private void firstNameTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_firstNameTextFieldKeyPressed
        firstNameTextField.setForeground(new Color(0, 0, 0));
    }//GEN-LAST:event_firstNameTextFieldKeyPressed

    private void middleNameTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_middleNameTextFieldKeyPressed
        middleNameTextField.setForeground(new Color(0, 0, 0));
    }//GEN-LAST:event_middleNameTextFieldKeyPressed

    private void lastNameTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_lastNameTextFieldKeyPressed
        lastNameTextField.setForeground(new Color(0, 0, 0));
    }//GEN-LAST:event_lastNameTextFieldKeyPressed

    private void lastNameTextFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_lastNameTextFieldFocusGained
        setTextFieldPlaceholder(lastNameTextField, "Last Name");
    }//GEN-LAST:event_lastNameTextFieldFocusGained

    private void lastNameTextFieldFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_lastNameTextFieldFocusLost
        removeTextFieldPlaceholder(lastNameTextField, "Last Name");
    }//GEN-LAST:event_lastNameTextFieldFocusLost

    private void usernameTextFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_usernameTextFieldFocusGained
        setTextFieldPlaceholder(usernameTextField, "Username");
    }//GEN-LAST:event_usernameTextFieldFocusGained

    private void usernameTextFieldFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_usernameTextFieldFocusLost
        removeTextFieldPlaceholder(usernameTextField, "Username");
    }//GEN-LAST:event_usernameTextFieldFocusLost

    private void usernameTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_usernameTextFieldKeyPressed
        usernameTextField.setForeground(new Color(0, 0, 0));
    }//GEN-LAST:event_usernameTextFieldKeyPressed

    private void emailTextFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_emailTextFieldFocusGained
        setTextFieldPlaceholder(emailTextField, "Email");
    }//GEN-LAST:event_emailTextFieldFocusGained

    private void emailTextFieldFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_emailTextFieldFocusLost
        removeTextFieldPlaceholder(emailTextField, "Email");
    }//GEN-LAST:event_emailTextFieldFocusLost

    private void emailTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_emailTextFieldKeyPressed
        emailTextField.setForeground(new Color(0, 0, 0));
    }//GEN-LAST:event_emailTextFieldKeyPressed

    private void sectionTextFieldFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_sectionTextFieldFocusGained
        setTextFieldPlaceholder(sectionTextField, "Section");
    }//GEN-LAST:event_sectionTextFieldFocusGained

    private void sectionTextFieldFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_sectionTextFieldFocusLost
        removeTextFieldPlaceholder(sectionTextField, "Section");
    }//GEN-LAST:event_sectionTextFieldFocusLost

    private void sectionTextFieldKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_sectionTextFieldKeyPressed
        sectionTextField.setForeground(new Color(0, 0, 0));
    }//GEN-LAST:event_sectionTextFieldKeyPressed

    private void cancelButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_cancelButtonMouseClicked
        new LoginFrame().setVisible(true);
        this.dispose();
    }//GEN-LAST:event_cancelButtonMouseClicked

    private void userConditionsButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_userConditionsButtonMouseClicked
        new StudentTermsAndConditions().setVisible(true);
    }//GEN-LAST:event_userConditionsButtonMouseClicked

    private void iAgreeCheckBoxMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_iAgreeCheckBoxMouseClicked
        if (iAgreeCheckBox.isSelected()) {
            registerButton.setEnabled(true);
        } else {
            registerButton.setEnabled(false);
        }
    }//GEN-LAST:event_iAgreeCheckBoxMouseClicked

    private void registerButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_registerButtonMouseClicked
        addStudent();
    }//GEN-LAST:event_registerButtonMouseClicked

    private void passwordTextFieldKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_passwordTextFieldKeyReleased
        String currentPassword = String.valueOf(passwordTextField.getPassword());
        confirmPasswordTextField.setText(currentPassword);
    }//GEN-LAST:event_passwordTextFieldKeyReleased

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel AddressLabel;
    private javax.swing.JTextField addressTextField;
    private javax.swing.JButton cancelButton;
    private javax.swing.JLabel confirmPasswordLabel;
    private javax.swing.JPasswordField confirmPasswordTextField;
    private javax.swing.JComboBox<String> courseComboBox;
    private javax.swing.JLabel courseLabel;
    private javax.swing.JLabel emailLabel;
    private javax.swing.JTextField emailTextField;
    private javax.swing.JTextField firstNameTextField;
    private javax.swing.JLabel fullNameLabel;
    private javax.swing.JCheckBox iAgreeCheckBox;
    private javax.swing.JTextField lastNameTextField;
    private javax.swing.JTextField middleNameTextField;
    private javax.swing.JLabel passwordLabel;
    private javax.swing.JPasswordField passwordTextField;
    private javax.swing.JLabel phoneNumberLabel;
    private javax.swing.JTextField phoneNumberTextField;
    private javax.swing.JButton registerButton;
    private javax.swing.JPanel rootPanel;
    private javax.swing.JTextField sectionTextField;
    private javax.swing.JButton userConditionsButton;
    private javax.swing.JLabel usernameLabel;
    private javax.swing.JTextField usernameTextField;
    private javax.swing.JComboBox<String> yearLevelComboBox;
    // End of variables declaration//GEN-END:variables
    /**
     * @param text field and string to set placeholder from text fields
     */
    private void setTextFieldPlaceholder(javax.swing.JTextField textField, String text) {
        if (textField.getText().equalsIgnoreCase(text)) {
            textField.setText("");
            textField.setForeground(new Color(153, 153, 153));
        }
    }

    /**
     * @param text field and string to remove placeholder from text fields
     */
    private void removeTextFieldPlaceholder(javax.swing.JTextField textField, String text) {
        if (textField.getText().equals("")) {
            textField.setText(text);
            textField.setForeground(new Color(153, 153, 153));
        }
    }

    /**
     * @add data to the database
     */
    private void addStudent() {
        // Basic field validation
        if (firstNameTextField.getText().isBlank() || middleNameTextField.getText().isBlank() || lastNameTextField.getText().isBlank()
                || usernameTextField.getText().isBlank() || emailTextField.getText().isBlank()
                || phoneNumberTextField.getText().isBlank() || addressTextField.getText().isBlank()
                || sectionTextField.getText().isEmpty()) {
            JOptionPane.showMessageDialog(this, "Please fill out all fields.", "Input Error", JOptionPane.ERROR_MESSAGE);
            return;
        }

        String password = String.valueOf(passwordTextField.getPassword());
        String confirmPassword = String.valueOf(confirmPasswordTextField.getPassword());

        // Check if passwords match
        if (!password.equals(confirmPassword)) {
            JOptionPane.showMessageDialog(this, "Passwords do not match.", "Input Error", JOptionPane.ERROR_MESSAGE);
            return;
        }

        // Check Section if valid
        if (sectionTextField.getText().length() > 1) {
            JOptionPane.showMessageDialog(this, "Incorrect input for section.", "Input Error", JOptionPane.ERROR_MESSAGE);
            return;
        }

        // Validate email format (basic validation)
        if (!emailTextField.getText().contains("@")) {
            JOptionPane.showMessageDialog(this, "Please enter a valid email address.", "Input Error", JOptionPane.ERROR_MESSAGE);
            return;
        }

        String url = "jdbc:mysql://localhost:3306/library catalog system";
        String username = "Jareth";
        String passwordDB = "Jareth0223";
        Connection connection = null;
        PreparedStatement preparedStatement = null;
        try {
            connection = DriverManager.getConnection(url, username, passwordDB);
            String insertQuery = "INSERT INTO students (fullName, userName, email, password, phoneNumber, address, course, yearLevel, section) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";
            preparedStatement = connection.prepareStatement(insertQuery);
            preparedStatement.setString(1, firstNameTextField.getText() + " " + middleNameTextField.getText() + " " + lastNameTextField.getText());
            preparedStatement.setString(2, usernameTextField.getText());
            preparedStatement.setString(3, emailTextField.getText());
            preparedStatement.setString(4, encryptPassword(password));
            preparedStatement.setString(5, phoneNumberTextField.getText());
            preparedStatement.setString(6, addressTextField.getText());
            preparedStatement.setString(7, courseComboBox.getSelectedItem().toString());
            preparedStatement.setInt(8, Integer.parseInt(yearLevelComboBox.getSelectedItem().toString()));
            preparedStatement.setString(9, sectionTextField.getText());

            int rowsAffected = preparedStatement.executeUpdate();
            if (rowsAffected > 0) {
                JOptionPane.showMessageDialog(this, "Registered successfully!", "Success", JOptionPane.INFORMATION_MESSAGE);
                clearFields();
                new LoginFrame().setVisible(true);
                this.dispose();
            } else {
                JOptionPane.showMessageDialog(this, "Failed to register.", "Error", JOptionPane.ERROR_MESSAGE);
            }
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Invalid input for year level. Please enter a valid number.", "Input Error", JOptionPane.ERROR_MESSAGE);
        } catch (SQLException e) {
            JOptionPane.showMessageDialog(this, "Database error: " + e.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
        } finally {
            try {
                if (preparedStatement != null) {
                    preparedStatement.close();
                }
                if (connection != null) {
                    connection.close();
                }
            } catch (SQLException e) {
                System.out.println("Error closing connection: " + e.getMessage());
            }
        }
    }

    private void clearFields() {
        firstNameTextField.setText("First Name");
        firstNameTextField.setForeground(new Color(153, 153, 153));
        middleNameTextField.setText("Middle Name");
        middleNameTextField.setForeground(new Color(153, 153, 153));
        lastNameTextField.setText("Last Name");
        lastNameTextField.setForeground(new Color(153, 153, 153));
        usernameTextField.setText("Username");
        usernameTextField.setForeground(new Color(153, 153, 153));
        emailTextField.setText("Email");
        emailTextField.setForeground(new Color(153, 153, 153));
        passwordTextField.setText("");
        confirmPasswordTextField.setText("");
        phoneNumberTextField.setText("09");
        addressTextField.setText("");
        sectionTextField.setText("Section");
        emailTextField.setForeground(new Color(153, 153, 153));
    }

    private String encryptPassword(String password) {
        int bcryptStrength = 12;
        return BCrypt.hashpw(password, BCrypt.gensalt(bcryptStrength));
    }
}
